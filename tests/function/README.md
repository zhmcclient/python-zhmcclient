# Function tests for the zhmcclient

This directory contains YAML files that define testcases for testing the
zhmcclient by simulating the HMC interactions. This allows to test all layers
of the zhmcclient library from its public API down to the "requests" package
providing the transport layer for communicating with the HMC. Specifically,
the "requests-mock" Python package is used for that.
This concept allows end2end-like testing without actually using an HMC.

Each testcase in a YAML test file defines:

* one zhmcclient API method that will be called or one zhmcclient API property
  that will be accessed

* zero or more HMC interactions resulting from that method call or property
  access. Each HMC interaction defines:

  - Expected HMC request payload generated by the zhmcclient code

  - HMC response payload to be passed back to the zhmcclient code

* The expected result of the zhmcclient API function, including any exceptions.

There is no setup needed for these tests, and no state of the simulated HMC or
of the zhmcclient session needs to be kept or defined in the testcase. These
tests also do not depend on the zhmcclient mock support.

The behavior is entirely determined by the HMC responses defined in the
testcase. For example, a testcase that performs a "Get XXX Properties"
operation on a non-existing resource is defined by setting the HMC response
payload in the testcase to the corresponding error.

The format of the test files is defined in JSON schema
[schemas/test_file.schema.yaml](schemas/test_file.schema.yaml).

Limitations:

* zhmcclient methods and properties that return zhmcclient objects are not
  supported.
* notifications are not supported.
